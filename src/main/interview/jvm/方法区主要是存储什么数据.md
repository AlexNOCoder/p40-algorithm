# 方法区主要是存储什么数据

### 说明
- 方法区(Method Area)与Java堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类型信息、常量、静态变量、即时编译器后的代码缓存等数据，。

- 说到方法区，不得不提一下"永久代"的概念，尤其是在JDK8之前，许多java程序员都习惯在HotSpot虚拟机上开发、部署程序，很多人都更愿意把方法区称为"永久代"(Permanent Generation),或将两者混为一谈。
- 本质上这两者并不是等价的，因为仅仅是当时的HotSpot虚拟机设计团队选择把收集器的分代设计扩展至方法区，或者说使用永久代来实现方法区而已，这样使得HotSpot的垃圾收集器能够像管理java堆一样管理这个部分内存，省去专门为方法区编写内存管理代码的工作。

- 到了JDK8，终于完全废弃了永久代的概念，改用与JRockit、J9一样在本地内存中实现的元空间(Meta-space)来代替，把JDK7中永久代还剩余的内容(主要是类型信息)完全移到元空间中。

- 《Java虚拟机规范》对方法区的约束是非常宽松的，除了和java堆一样不需要连续的内存和可以选择固定大小或者可扩展外，甚至还可以选择实现辣鸡收集。相对而言，垃圾收集行为在这个区域的确是比较少出现的，但并非数据进入了方法区就如永久代的名字一样"永久"存在了。
- 这区域的内存回收目标主要是针对常量池的回收和对类型的卸载，一般来说这个区域的回收效率比较难令人满意，尤其是类型的卸载，条件相当苛刻，但是这部分区域的回收有时又确实是必要的。