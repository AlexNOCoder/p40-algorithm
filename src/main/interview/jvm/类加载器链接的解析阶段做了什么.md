# 类加载器链接的解析阶段做了什么

### 说明

解析阶段是java虚拟机将常量池内的符号引用替换为直接引用的过程。

- 符号引用(Symbolic References)：符号引用以一组符号来描述所引用的目标，符号可以是任何形式的字面量，只要使用时能无歧义地定位到目标即可。
- 直接引用(Direct References)：直接引用是可以直接指向目标的指针、相对偏移量或者是一个能间接定位到目标的句柄。如果有了直接引用，那引用的目标必定已经在虚拟机的内存中存在。

《java虚拟机规范》之中并没有规定解析阶段发生的具体时间，虚拟机实现可以根据需要来自行判断，到底是在类被加载器加载时就对常量池中的符号引用进行解析，还是等到一个符号引用将要被使用前才去解析它。
对同一个符号引用进行多次解析请求是很常见的事情，除了invokedynamic指令之外，虚拟机是吸纳可以对第一次解析的结果进行缓存，譬如在运行时直接引用常量池中的记录，并把常量池标识为已解析状态，从而避免解析动作重复进行。

解析动作主要针对类或接口、字段、类方法、接口方法、方法类型、方法句柄和调用点限定符这7类符号引用进行
分别对应常量池的CONSTANT_Class_info、CONSTANT_Fieldref_info、CONSTANT_Methodref_info、CONSTANT_InterfaceMethodref_info、CONSTANT_MethodType_info、
CONSTANT_MethodHandle_info、CONSTANT_Dynamic_info、CONSTANT_invokDynamic_info 8中常量类型。