# Redis和Mysql如何保证数据一致
### 说明
1. 先更新Mysql，再更新Redis，如果更新Redis失败，可能仍然不一致
2. 先删除Redis缓存数据，再更新Mysql，再次查询的时候在将数据添加到缓存中，这种方案能解决1方案的问题，但是在高并发下性能较低，而且仍然会出现数据不一致的问题，比如线程1删除了Redis缓存数据，正在更新Mysql，此时另外一个查询在查询，那么就会把Mysql中老数据又查询到Redis中
3. 延时双删，步骤是：先删除Redis缓存数据，再更新Mysql，延迟几百毫秒再删除Redis缓存数据，这样就算在更新Mysql时，有其他线程读了Mysql，把老数据读到了Redis，那么也会被删除掉，从而把数据保持一致
4. 普通分布式锁，有性能问题
5. 读写锁实现(读多写少场景)
6. 内存队列，按照队列的先后顺序执行