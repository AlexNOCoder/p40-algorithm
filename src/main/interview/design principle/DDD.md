# DDD

### 说明

- 领域驱动设计
  - 根基
    - 通用语言
    - 模型驱动设计
  - 作用
    - 拉近业务人员与开发人员之间距离
    - 提供了一套标准的建模方法
  - 应用场景
    - 微服务
- 通用语言
  - 概念
    - 一套在业务人员和开发人员之间的共有语言
    - 一个业务中有哪些概念以及哪些操作
  - 如何设计
    - 事件风暴
      - 识别领域事件
      - 找出引发领域事件的命令
      - 找出与事件命令相关的实体或者聚合
  - 意义
    - 减少开发与业务人员之间的沟通阻碍
  
- 模型驱动的设计
  - 战略设计
    - 高层设计
    - 按照业务将系统拆分成不同的领域
    - 领域
      - 对应软件开发要解决的问题
    - 子域（由领域分解）
      - 核心域 全力投入
      - 概念
        - 整个系统最重要的子域部分
      - 如何识别
        - 为什么这个系统值得写
        - 为什么不直接买一个
        - 为什么不外包
    - 支撑域 投入次之
      - 概念
        - 非核心竞争力的子域，但系统不得不做
        - 市场上找不到一个现成的方案
    - 通用域 可以花钱买
      - 概念
        - 行业里通常都是这么做
        - 即使不自己做，也并不影响业务运行
        
  - 限界上下文 
    - 概念
      - 一个限定通用语言自由使用的边界 
      -  一旦出界，含义便无法保证
    - 优势
      - 完全独立 
      - 不会跑到其他服务中去做很多事
  - 上下文映射图 描述交互方式
    - 交互方式
      - 合作关系
      - 共享内核
      - 跟随者
    - 防腐层
      - 概念
        1. 在外部模型和内部模型之间建立一个翻译层
        1. 将外部模型转化为内部模型 
           
      - 地位
        1. 一个比较重要的交互方式
      - 作用
        1. 帮助理解系统的各个部分之间如何进行交互
        1. 帮我们建立一个全局性的认知
  - 战术设计
    - 低层设计
    - 考虑如何组织不同的业务模型
    - 角色
      - 实体
        - 概念
          - 能够通过唯一标识符标识出来的对象
        - 举例
          - 订单单号
      - 值对象
        - 概念
          - 表示一个值，会有很多属性
        - 举例
          - 订单的订单地址
      - 区分实体和值对象
        - 目的
          - 区分变的对象和不变的对象
        - 启示
          - 在DDD的对象设计中，对象是有行为的
          - 在面向对象的封装里，好的封装是基于行为的

    - 关系
      - 聚合
        - 概念
          - 多个实体或值对象的组合
          - 一个组合要"同生共死"
        - 举例
          - 订单和订单项就是一个聚合
      - 聚合根
        - 概念
          - 从外部访问一个聚合的起点
        - 举例
          - 订单就是聚合根
      - 识别聚合
        - 是聚合
          - 可以一次都拿出来
        - 不是聚合
          - 靠标识符按需提取

    - 互动
      - 事件
        - 领域事件
          - 概念
            - 业务过程中最重要的事情
          - 作用
            - 作为一条主线，帮我们梳理业务上的变化
            - 还可以帮助我们让系统达成最终一致的状态
      - 动作
        - 领域服务
          - 操作目标
            - 领域对象，也就是聚合根
        - 工厂
          - 用途
            - 创建对象的动作
        - 仓库
          - 用途
            - 保存变更的结果
          - 持久化的操作
        - 应用服务
          - 用途
            - 协调不同的领域对象、领域服务等
            - 完成客户端所要求的各种业务动作
          - 与领域服务区别
            - 不包含业务逻辑