# 回表

### 定义

如果索引的列在select所需获得的列中或者根据一次索引查询就能获得记录就不需要回表，如果select所需获得列中有非索引列，索引就需要到表中找到相应的列的信息，这就叫回表。

### 回表流程

1. 先通过普通索引定位到主键值
1. 再通过聚集索引定位到行记录

### 说明
先定位主键值，再定位行记录，它的性能较扫一遍索引树更低。

### 示例
```sql
   
    create table sutdent(
    id int primary key,
    k int not null,
    name varchar(16),
    index (k)
    )engine = InnoDB;
    
    INSERT INTO student(id, k, name) VALUES
    (1, 2, '小王'),
    (2, 1, '小明'),
    (3, 3, '小张'); 
 ```  

### 示例说明
- 假设，现在我们要查询出 id 为 2 的数据。那么执行 select * from student where ID = 2; 这条 SQL 语句就不需要回表。
- 原因是根据主键的查询方式，则只需要搜索 ID 这棵 B+ 树。主键是唯一的，根据这个唯一的索引，MySQL 就能确定搜索的记录。
- 但当我们使用 k 这个索引来查询 k = 2 的记录时就要用到回表。
- select * from student where k = 2; 原因是通过 k 这个普通索引查询方式，则需要先搜索 k 索引树，然后得到主键 ID 的值为 1，再到 ID 索引树搜索一次。
- 这个过程虽然用了索引，但实际上底层进行了两次索引查询，这个过程就称为回表。
也就是说，基于非主键索引的查询需要多扫描一棵索引树。因此，我们在应用中应该尽量使用主键查询。
