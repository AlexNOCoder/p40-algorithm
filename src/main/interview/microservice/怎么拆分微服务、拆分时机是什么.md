# 怎么拆分微服务、拆分时机是什么

### 怎么拆分

1. 高内聚低耦合，职责单一，服务粒度适中，服务不要太细
1. 以业务模型切入：比如产品，用户，订单为一个模型切入
1. 演进式拆分：刚开始不要拆分太细，可以随着迭代过程来逐步优化

### 高并发微服务化架构设计
1. 微服务化的基石：持续集成
1. 静态资源分离和接入层设计
1. 应用层设计之无状态化与容器化
1. 应用层设计之服务的拆分，发现与编排
1. 性能优化之数据库设计与横向扩展
1. 性能优化之缓存设计与横向扩展
1. 性能优化之消息队列与异步化设计
1. 服务的熔断，降级，限流设计
1. 配置中心的设计与实践
1. 统一日志中心与实践
1. 全链路应用监控实践
1. 服务的全链路压测实践

### 演进流程
- 微服务1.0 仅使用注册发现，基于springCloud或者Dubbo进行开发
- 微服务2.0 使用了熔断、限流、降级等服务治理策略，并配备完善微服务工具和平台，
- 微服务3.0 Service Mesh将服务治理作为通用组件，下层到平台层实现，是的应用层仅仅关注业务逻辑，平台层可以根据监控自动调度和参数调整，实现AIOps和智能调度 。

### 拆分时机：（足够的成本，投入成本，时间成本前提）


- 首先，如果预估到业务在飞速增长，那就别犹豫，一定要提前考虑微服务拆分。
- 其次，如果在设计架构的时候，发现需要很多异构的技术栈，那也需要考虑下微服务
- 最后，如果公司技术基础设施非常完备，对应的业务起初就设计的非常复杂，也可以直接上微服务